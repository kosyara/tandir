<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–°–ª–æ–º–∞–π –¢–∞–Ω–¥—ã—Ä –ö–æ–≤—à–æ–º</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f8e7c9;
        text-align: center;
        padding: 30px;
    }

    #gameArea {
        position: relative;
        width: 300px;
        height: 350px;
        margin: 0 auto;
    }

    #tandir {
        width: 260px;
        height: 300px;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        position: absolute;
        left: 20px;
        top: 20px;
        transition: transform 0.1s;
    }

    #kovsh {
        width: 140px;
        position: absolute;
        right: -40px;
        top: 140px;
        transform-origin: left center;
        transform: rotate(0deg);
        transition: transform 0.1s;
    }

    #tandir.shake {
        transform: translateX(-10px);
    }

    #hpBar {
        width: 300px;
        height: 25px;
        background: #ddd;
        border-radius: 12px;
        margin: 20px auto;
        overflow: hidden;
    }

    #hpFill {
        height: 100%;
        width: 100%;
        background: #d9534f;
        transition: width 0.25s;
    }

    #hitBtn {
        font-size: 22px;
        padding: 15px 30px;
        margin-top: 10px;
        background: #c87a2b;
        border: none;
        border-radius: 10px;
        color: white;
        cursor: pointer;
    }

    #hitBtn:hover {
        background: #a86623;
    }

    #log {
        font-size: 20px;
        margin-top: 20px;
        min-height: 40px;
    }
</style>

</head>
<body>

<h1>ü•£ –°–ª–æ–º–∞–π –¢–∞–Ω–¥—ã—Ä –ö–æ–≤—à–æ–º!</h1>

<div id="gameArea">
    <div id="tandir"></div>
    <img id="kovsh" src="kovsh.png">
</div>

<div id="hpBar">
    <div id="hpFill"></div>
</div>

<button id="hitBtn">–£–î–ê–†–ò–¢–¨ –ö–û–í–®–û–ú</button>

<div id="log"></div>

<script>
let hp = 100;

// —Å—Ç–∞–¥–∏–∏ —Ç–∞–Ω–¥—ã—Ä–∞
const tandirStages = [
    "damage1.png", // —Ü–µ–ª—ã–π
    "damage2.png", // —Ç—Ä–µ—â–∏–Ω—ã —Å—Ä–µ–¥–Ω–∏–µ
    "damage3.png", // –±–æ–ª—å—à–∏–µ —Ç—Ä–µ—â–∏–Ω—ã
    "damage4.png"  // –ø–æ—á—Ç–∏ —Å–ª–æ–º–∞–Ω / —Ä–∞–∑—Ä—É—à–µ–Ω–∏–µ
];

const tandir = document.getElementById("tandir");
const hpFill = document.getElementById("hpFill");
const logBox = document.getElementById("log");
const btn = document.getElementById("hitBtn");
const kovsh = document.getElementById("kovsh");

// –Ω–∞—á–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞
tandir.style.backgroundImage = `url(${tandirStages[0]})`;

btn.onclick = hitFunction;

// --------------------------------------------------
// –§—É–Ω–∫—Ü–∏—è —É–¥–∞—Ä–∞
// --------------------------------------------------
function hitFunction() {
    if (hp <= 0) return;

    let dmg = Math.floor(Math.random() * 15) + 10;
    hp -= dmg;
    if (hp < 0) hp = 0;

    hpFill.style.width = hp + "%";
    logBox.innerText = `–¢—ã —É–¥–∞—Ä–∏–ª –∫–æ–≤—à–æ–º –∏ –Ω–∞–Ω—ë—Å ${dmg} —É—Ä–æ–Ω–∞!`;

    // —Ç—Ä—è—Å–∫–∞ —Ç–∞–Ω–¥—ã—Ä–∞
    tandir.classList.add("shake");
    setTimeout(() => tandir.classList.remove("shake"), 100);

    // –∞–Ω–∏–º–∞—Ü–∏—è –∫–æ–≤—à–∞
    kovsh.style.transform = "rotate(-50deg)";
    setTimeout(() => { kovsh.style.transform = "rotate(0deg)"; }, 120);

    // —Å–º–µ–Ω–∞ —Å—Ç–∞–¥–∏–∏
    if (hp > 75) tandir.style.backgroundImage = `url(${tandirStages[0]})`;
    else if (hp > 50) tandir.style.backgroundImage = `url(${tandirStages[1]})`;
    else if (hp > 25) tandir.style.backgroundImage = `url(${tandirStages[2]})`;
    else tandir.style.backgroundImage = `url(${tandirStages[3]})`;

    // –µ—Å–ª–∏ —Ç–∞–Ω–¥—ã—Ä —Ä–∞–∑—Ä—É—à–µ–Ω
    if (hp <= 0) endGame();
}

// --------------------------------------------------
// –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
// --------------------------------------------------
function endGame() {
    logBox.innerHTML = "üî• –¢–∞–Ω–¥—ã—Ä —Ä–∞–∑—Ä—É—à–µ–Ω!";
    btn.innerText = "–ó–∞–Ω–æ–≤–æ";
    btn.onclick = restartGame;

    tandir.style.transform = "scale(0.8) rotate(10deg)";
}

// --------------------------------------------------
// –†–µ—Å—Ç–∞—Ä—Ç –∏–≥—Ä—ã
// --------------------------------------------------
function restartGame() {
    hp = 100;
    hpFill.style.width = "100%";
    logBox.innerText = "";
    tandir.style.transform = "scale(1) rotate(0deg)";
    tandir.style.backgroundImage = `url(${tandirStages[0]})`;

    btn.innerText = "–£–î–ê–†–ò–¢–¨ –ö–û–í–®–û–ú";
    btn.onclick = hitFunction;
}
</script>

</body>
</html>
